<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Happy Birthday My Puchkiüòò!</title>
    <style>
        * { margin:0; padding:0; box-sizing:border-box; font-family:'Comic Sans MS', cursive, sans-serif; }
        body {
            background: linear-gradient(135deg,#ff9a9e 0%,#fad0c4 100%);
            height:100vh; overflow:hidden; display:flex; flex-direction:column;
            justify-content:center; align-items:center; position:relative;
        }
        .container {
            text-align:center; z-index:10; padding:2rem; max-width:800px;
            background-color: rgba(255,255,255,0.2); border-radius:20px;
            backdrop-filter: blur(5px); box-shadow: 0 8px 32px rgba(255,105,180,0.3);
            transition: all .5s ease;
        }
        .container:hover { box-shadow: 0 8px 32px rgba(255,105,180,0.5); }

        /* h1: keep the bounce-in animation but ensure final state persists */
        h1 {
            font-size:3.5rem;
            color:#FF1493;
            text-shadow:2px 2px 8px rgba(255,255,255,0.8);
            margin-bottom:1.5rem;
            /* start hidden so bounce-in animates in from 0 -> 1 */
            opacity: 0;
            /* explicitly set animation properties in the correct order so the browser respects fill-mode */
            animation-name: bounce-in;
            animation-duration: 1.5s;
            animation-timing-function: ease;
            animation-delay: 0.5s;
            animation-fill-mode: both; /* <-- this makes the final (visible) state persist */
        }

        .subtitle { font-size:1.8rem; color:#8A2BE2; margin-bottom:1rem; text-shadow:1px 1px 4px rgba(255,255,255,0.6); opacity:0; }
        .next-button {
            padding:1rem 3rem; font-size:1.5rem; background:linear-gradient(45deg,#FF1493,#8A2BE2);
            color:#fff; border:none; border-radius:50px; cursor:pointer; box-shadow:0 4px 15px rgba(255,20,147,0.5);
            transition: all .3s ease; opacity:0; animation:fade-in 1s forwards 3s;
        }
        .next-button:hover { transform:scale(1.05) translateY(-5px); box-shadow:0 6px 20px rgba(255,20,147,0.7);
                              background:linear-gradient(45deg,#8A2BE2,#FF1493); }
        .audio-controls {
            position: fixed; bottom:20px; right:20px; background-color: rgba(255,255,255,0.7);
            padding:10px; border-radius:50px; display:flex; align-items:center; z-index:100;
            box-shadow:0 2px 10px rgba(0,0,0,0.2);
        }
        .audio-controls button { background:none; border:none; font-size:1.5rem; cursor:pointer; color:#FF1493; margin-right:10px; }
        .audio-controls button:hover { transform:scale(1.2); color:#8A2BE2; }
        .audio-controls input { width:100px; }

        .confetti, .balloon, .heart, .star {
            position:absolute; width:20px; height:20px; background-size:contain; background-repeat:no-repeat;
            z-index:1; opacity:.8; pointer-events:none;
        }
        .balloon{ width:40px; height:50px; } .heart{ width:25px; height:25px; } .star{ width:15px; height:15px; }

        @keyframes float { 0%{transform:translateY(0) rotate(0deg);} 50%{transform:translateY(-20px) rotate(10deg);} 100%{transform:translateY(0) rotate(0deg);} }
        @keyframes sway { 0%{transform:translateX(0);} 50%{transform:translateX(20px);} 100%{transform:translateX(0);} }
        @keyframes sparkle { 0%,100%{opacity:.4;} 50%{opacity:1; filter:drop-shadow(0 0 5px white);} }
        @keyframes bounce-in {
            0% {
                transform: scale(0);
                opacity: 0;
            }
            60% {
                transform: scale(1.1);
                opacity: 1;
            }
            80% {
                transform: scale(0.9);
                opacity: 1;
            }
            100% {
                transform: scale(1);
                opacity: 1;
            }
        }
        @keyframes fade-in { 0%{opacity:0; transform:translateY(20px);} 100%{opacity:1; transform:translateY(0);} }
        @keyframes typewriter { from{width:0;} to{width:100%;} }

        .typewriter-container { display:inline-block; margin:0 auto; position:relative; max-width:100%; overflow:hidden; height:2.5rem; }
        .typewriter-text { position:relative; white-space:nowrap; overflow:hidden; width:0; animation:typewriter 3s steps(50) forwards 1.5s; }
        .cursor { position:absolute; right:-5px; width:3px; height:100%; background-color:#8A2BE2; animation:blink .8s infinite; }
        @keyframes blink { 0%,100%{opacity:1;} 50%{opacity:0;} }

        @media(max-width:768px){
            h1{font-size:2.5rem;} .subtitle{font-size:1.3rem;}
            .container{width:90%; padding:1.5rem;} .next-button{padding:.8rem 2rem; font-size:1.2rem;}
            .audio-controls{bottom:10px; right:10px;}
        }

        /* password area */
        .password-row {
            display:flex; gap:.6rem; align-items:center; justify-content:center; margin-top:1rem;
        }
        .password-row input[type="password"]{
            padding:.6rem .8rem; border-radius:8px; border:1px solid rgba(0,0,0,.1); min-width:220px;
        }
        .pw-message { margin-top:.6rem; color:#FFB3C6; min-height:1.2rem; text-align:center; }
    </style>
</head>
<body>
    <div class="container">
        <h1 style="text-shadow: rgb(255,255,255) 0 0 10px, rgba(255,255,255,.8) 0 0 20px, rgba(255,20,147,.6) 0 0 30px;">
            Happy Birthday, <br>My Puchkiüòò! <br>üéâüéÇ
        </h1>

        <div class="typewriter-container">
            <div class="subtitle typewriter-text">
                Hey bacha! Ready for your special surprise? Enter the password below and click "Let's Go!" to continue.
                <span class="cursor"></span>
            </div>
        </div>

        <!-- Password input placed on same page -->
        <div class="password-row" aria-label="Password entry">
            <input id="page-password" type="password" placeholder="Enter password">
            <button id="unlock-button" class="next-button" style="opacity:1; animation:none;">Let's Go! ‚ú®</button>
        </div>
        <div id="pw-message" class="pw-message" aria-live="polite"></div>
    </div>

    <div class="audio-controls">
        <button id="play-pause"><i class="play-icon">‚ñ∂Ô∏è</i></button>
        <input type="range" id="volume" min="0" max="1" step="0.1" value="0.5">
    </div>

    <audio id="birthday-song" loop>
        <source src="Cupcake.mp3">
        Your browser does not support the audio element.
    </audio>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.11.4/gsap.min.js"></script>
    <script>
        // Simple page-level password gate (client-side only; not secure)
        const GATE_PASSWORD = "Bhondu"; // change as needed
        const pwInput = document.getElementById('page-password');
        const unlockButton = document.getElementById('unlock-button');
        const pwMessage = document.getElementById('pw-message');

        // audio and controls
        const audio = document.getElementById('birthday-song');
        const playPauseBtn = document.getElementById('play-pause');
        const volumeControl = document.getElementById('volume');
        let isPlaying = false;

        // ensure audio controls are visible (they can remain available)
        // but prevent navigation until correct password
        audio.volume = volumeControl.value;

        // helper: indicate incorrect password
        function showError(msg) {
            pwMessage.textContent = msg;
            // small shake
            gsap.fromTo('.password-row', { x: -6 }, { x: 0, duration: 0.35, ease: "power2.out" });
            pwInput.value = '';
            pwInput.focus();
        }

        // main unlock/navigation handler
        function handleUnlockAndNavigate() {
            const val = pwInput.value;
            if (!val) { showError('Please enter the password.'); return; }
            if (val === GATE_PASSWORD) {
                // optional: try to play audio as a result of user gesture
                audio.play().then(() => {
                    isPlaying = true;
                    playPauseBtn.innerHTML = '<i class="play-icon">‚è∏Ô∏è</i>';
                }).catch(() => {
                    // ignore; user can press play
                });
                // navigate to next page
                gsap.to(unlockButton, {
                    scale: 1.12,
                    yoyo: true,
                    repeat: 1,
                    duration: 0.25,
                    onComplete: () => { window.location.href = "memorylane.html"; }
                });
            } else {
                showError('Incorrect password. Try again.');
            }
        }

        unlockButton.addEventListener('click', handleUnlockAndNavigate);
        pwInput.addEventListener('keydown', (e) => { if (e.key === 'Enter') handleUnlockAndNavigate(); });

        // Play/Pause button logic
        playPauseBtn.addEventListener('click', () => {
            if (isPlaying) {
                audio.pause();
                playPauseBtn.innerHTML = '<i class="play-icon">‚ñ∂Ô∏è</i>';
            } else {
                audio.play();
                playPauseBtn.innerHTML = '<i class="play-icon">‚è∏Ô∏è</i>';
            }
            isPlaying = !isPlaying;
        });

        volumeControl.addEventListener('input', () => { audio.volume = volumeControl.value; });

        // Confetti / floating elements (unchanged behavior)
        function createFloatingElements() {
            const colors = ['#FF1493','#8A2BE2','#FFD700','#FF4500','#00BFFF','#32CD32'];
            const elements = ['confetti','balloon','heart','star'];
            const confettiShapes = ['‚ñ≤','‚ñ†','‚óè','‚òÖ','‚ô•','‚ô¶','‚ú¶','‚úß'];
            for (let i=0;i<80;i++){
                setTimeout(()=> {
                    const element = document.createElement('div');
                    const elementType = elements[Math.floor(Math.random()*elements.length)];
                    element.className = elementType;
                    element.style.left = Math.random()*100 + 'vw';
                    element.style.top = -30 + 'px';
                    const color = colors[Math.floor(Math.random()*colors.length)];
                    if (elementType === 'confetti') {
                        const shape = confettiShapes[Math.floor(Math.random()*confettiShapes.length)];
                        element.innerHTML = shape;
                        element.style.color = color;
                        element.style.fontSize = (Math.random()*20+10)+'px';
                        element.style.transform = `rotate(${Math.random()*360}deg)`;
                    } else if (elementType === 'balloon') {
                        element.innerHTML = 'üéà';
                        element.style.fontSize = (Math.random()*30+20)+'px';
                        element.style.filter = `hue-rotate(${Math.random()*360}deg)`;
                    } else if (elementType === 'heart') {
                        element.innerHTML = '‚ù§Ô∏è';
                        element.style.fontSize = (Math.random()*20+10)+'px';
                        element.style.filter = `hue-rotate(${Math.random()*360}deg)`;
                    } else {
                        element.innerHTML = '‚ú®';
                        element.style.fontSize = (Math.random()*15+10)+'px';
                    }
                    document.body.appendChild(element);
                    gsap.to(element, {
                        y: window.innerHeight + 100,
                        x: '+=' + (Math.random()*200 - 100),
                        rotation: Math.random()*360,
                        duration: Math.random()*10 + 5,
                        ease: "power1.out",
                        onComplete: () => { document.body.removeChild(element); }
                    });
                    if (Math.random() > 0.7) {
                        gsap.to(element, { opacity: 0.5, yoyo:true, repeat:-1, duration:0.5, ease:"sine.inOut" });
                    }
                }, i*160);
            }
        }

        window.addEventListener('load', createFloatingElements);
        setInterval(createFloatingElements, 5000);

        gsap.to('h1', { textShadow: "0 0 10px rgba(255,255,255,1), 0 0 20px rgba(255,255,255,.8), 0 0 30px rgba(255,20,147,.6)", repeat:-1, yoyo:true, duration:2 });

        function handleResize(){ /* responsive adjustments if needed */ }
        window.addEventListener('resize', handleResize);
        handleResize();
    </script>
</body>
</html>
